(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0cdf2d8b"],{"01f3":function(e,t){function n(e){e=new Error("Cannot find module '"+e+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},(e.exports=n.resolve=n).id="01f3"},4685:function(e,t,n){},"8dea":function(r,d,e){"use strict";e.r(d);var u=e("7a23"),f={class:"wrapper"},g={class:"tit"},p=["innerHTML"],b={class:"box image-box"},h=function(e){return Object(u.C)("data-v-f856a242"),e=e(),Object(u.A)(),e}(function(){return Object(u.i)("div",{class:"step-text"},[Object(u.i)("div",{class:"row"},[Object(u.i)("i",null,"1"),Object(u.j)("开启前置摄像头，点击录像按钮")]),Object(u.i)("div",{class:"row"},[Object(u.i)("i",null,"2"),Object(u.j)("录制3~4秒时间，点击按钮结束")])],-1)}),v={class:"box image-box"},w={class:"box image-box camera-loading-box"},O={class:"camera-loading"},j={class:"box see"},k={id:"myCanvas",ref:"myCanvas"},x={id:"myCircle",ref:"myCircle",width:"300",height:"400"},C={id:"myStep",ref:"myStep",width:"300",height:"400"},R={class:"box image-box data-loading-box"},S={class:"box image-box result-box"},y={class:"result-image"},I={id:"myPhoto",ref:"myPhoto",class:"my-photo",width:"300",height:"400"},T={class:"btns"},E={class:"agreement"},L=["innerHTML"],N=Object(u.j)(" 查看"),M=Object(u.j)("开始检测"),D=Object(u.j)("开始检测"),_=Object(u.j)("重新检测"),U={slots:"default",style:{height:"320px",width:"100%","overflow-y":"auto"}},P=["src"];var m,l,A,K,o,t=e("7037"),F=e.n(t),t=e("c973"),n=e.n(t),t=e("9523"),t=e.n(t),B=e("a34a"),c=e.n(B),i=e("75e6"),s=e("d6e4"),G=e("75bf"),$=e("4ec3"),W=e("a5bb"),V=330,a=[],H=[],J=0,q=0,B={data:function(){return{fileLoading:!1,mediaDevice:!1,nets:"tinyFaceDetector",options:null,withBoxes:!0,detectFace:"detectAllFaces",detection:"landmark",videoEl:null,canvasEl:null,timeout:0,constraints:{audio:!1,video:{width:{ideal:400},height:{ideal:300},frameRate:{ideal:30},facingMode:"user"}},faceScore:0,faceNum:0,tipText:"请确保正对手机，光线充足",photos:[],photoSleep:!1,cameraWork:!1,cameraLoading:!1,overtime:8,overtimer:null,currentDeg:0,stepEl:null,stepIndex:0,modelLoading:!1,dataLoading:!1,resultShow:!1,resultCode:4,buttonTime:3,demo:0,mediaChecking:!0,isAlipay:!1,videoSrc:"",agreement:!1,agreementShow:!1,agreementURL:"",compName:""}},computed:{},components:t()({},i.a.Component.name,i.a.Component),watch:{currentDeg:function(e){V<=e&&(m.tipText="已完成",setTimeout(function(){m.fnClose(),m.dataRequest()},100))},faceScore:function(e){if(3<=m.photos.length)clearInterval(m.overtimer);else switch(m.faceNum){case 0:if(!m.mediaDevice)break;m.tipText="请移动人脸到框内";break;case 1:m.mediaDevice&&(m.tipText=.9<=e?"请保持姿势不变":"请正对手机，调整人脸与手机的距离"),.9<=e&&!m.photoSleep&&m.photos.length<3&&(m.takePhoto(e),m.photoSleep=!0,setTimeout(function(){m.photoSleep=!1},m.mediaDevice?Math.floor(501*Math.random()+300):100));break;default:if(!m.mediaDevice)break;m.tipText="请拍摄本人照片"}}},beforeMount:function(){var r=this;return n()(c.a.mark(function e(){var t,n,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(m=r).$route.query,t=a.certToken,n=a.cert_token,a=a.demo,t||n){e.next=5;break}return location.href="https://www.dabby.cn",e.abrupt("return");case 5:return o=t||n,sessionStorage.setItem("CERT_TOKEN",o),a&&(m.demo=1),e.next=10,m.isMediaDevice();case 10:m.mediaChecking=!1;case 11:case"end":return e.stop()}},e)}))()},mounted:function(){return n()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.$nextTick(n()(c.a.mark(function e(){var t,n,a,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object($.h)(m.getGPUInfo())){e.next=3;break}return window.location.replace("https://h5.dabby.com.cn/authhtml/error.html"),e.abrupt("return");case 3:return m.$nextTick(function(){var e="";setTimeout(function(){(e=document.getElementById("__vconsole"))&&(e.style.visibility="hidden",window.location.replace("https://h5.dabby.com.cn/authhtml/error.html?tip=1"))},2e3)}),m.modelLoading=!0,t=!1,J=0,(n=sessionStorage.getItem("CAMERA_ERROR"))&&(q=parseInt(n),m.mediaDevice=!1),m.getVisitorId(),e.next=12,m.sleepFun(500);case 12:if(n=localStorage.getItem("LOGIN_TOKEN"),a={certToken:o,referrer:document.referrer,loginToken:n},!(r=sessionStorage.getItem("REGISTER_PARAMS"))){e.next=23;break}r=JSON.parse(r),t=!0,m.modelLoading=!1,m.tipText='请确保 <span style="font-weight: bold;">'.concat(r.fullName,"</span> 本人操作"),m.compName=r.compName,e.next=25;break;case 23:return e.next=25,Object($.a)(a).then(function(e){if(m.modelLoading=!1,0===e.retCode)e.userInfo&&e.userInfo.fullName&&(m.tipText='请确保 <span style="font-weight: bold;">'.concat(e.userInfo.fullName,"</span> 本人操作")),m.compName=e.compName,t=!0;else switch(e.retCode){case 4607:Object(s.a)({type:"danger",message:"请先登录"}),sessionStorage.setItem("COMPNAME",e.compName),m.$router.replace("/login");break;case 5001:Object(s.a)({type:"danger",message:"请补充身份信息"}),e.userInfo&&e.userInfo.fullName&&e.userInfo.idNum&&sessionStorage.setItem("PRE_REGISTER_PARAMS",JSON.stringify({fullName:e.userInfo.fullName,idNum:e.userInfo.idNum,compName:e.compName})),sessionStorage.setItem("COMPNAME",e.compName),m.$router.replace("/info?updateType="+e.updateType);break;default:if(Object(s.a)({type:"danger",message:e.retMessage}),m.demo)return void m.$router.replace("/");m.tipText=e.retMessage,m.resultShow=!0,m.resultCode=3,m.foreBack(e)}}).catch(function(e){m.modelLoading=!1,i.a.alert({title:"网络错误",message:e}).then(function(){m.demo?m.$router.replace("/"):(m.tipText="网络错误",m.resultShow=!0,m.resultCode=3,window.history.go(-1))})});case 25:if(t){e.next=27;break}return e.abrupt("return");case 27:if(m.mediaDevice){e.next=30;break}return m.buttonTimmerRun(),e.abrupt("return");case 30:m.fnInit();case 31:case"end":return e.stop()}},e)})));case 1:case"end":return e.stop()}},e)}))()},beforeUnmount:function(){m.fnClose()},methods:{notAgreementClick:function(){Object(s.a)({type:"danger",message:"请先阅读并知悉相关协议"}),m.agreementClick()},agreementClick:function(){m.agreementShow=!m.agreementShow,m.agreementURL=m.agreementShow?"./agreement.html#"+(new Date).getTime():""},dataURLtoFile:function(e,t){for(var e=e.split(","),n=e[0].match(/:(.*?);/)[1],a=atob(e[1]),r=a.length,i=new Uint8Array(r);r--;)i[r]=a.charCodeAt(r);return new File([i],t,{type:n})},beforeRead:function(){return m.fileLoading=!0},getAndroidVersion:function(){var e=navigator.userAgent.toLowerCase(),t=null;return 0<e.indexOf("android")&&(t=(e.match(/android [\d._]+/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,"."),t=parseInt(t.split(".")[0])),t},sleepFun:function(t){return new Promise(function(e){setTimeout(function(){e()},t)})},getVisitorId:function(){return n()(c.a.mark(function e(){var t,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=W.a.load(),e.next=3,n;case 3:return t=e.sent,e.next=6,t.get();case 6:n=e.sent,t&&n&&sessionStorage.setItem("VISITOR_ID",n.visitorId);case 8:case"end":return e.stop()}},e)}))()},buttonTimmerRun:function(){K=setInterval(function(){m.buttonTime<=0?clearInterval(K):m.buttonTime--},1e3)},getGPUInfo:function(){var e=document.createElement("canvas").getContext("experimental-webgl"),t=e.getExtension("WEBGL_debug_renderer_info");return A=e.getParameter(t.UNMASKED_RENDERER_WEBGL),sessionStorage.setItem("GPU_INFO",A),A},getObjectURL:function(e){var t=null;return null!=window.createObjectURL?t=window.createObjectURL(e):null!=window.URL?t=window.URL.createObjectURL(e):null!=window.webkitURL&&(t=window.webkitURL.createObjectURL(e)),t},isMediaDevice:function(){return n()(c.a.mark(function e(){var t,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices){e.next=2;break}return e.abrupt("return",!1);case 2:if(void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(){if(!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia))return!1}),t=m.getAndroidVersion(),n=m.getGPUInfo(),t&&t<8&&-1!=n.indexOf("Mali"))return e.abrupt("return",!1);e.next=7;break;case 7:if(n=window.navigator.userAgent.toLowerCase(),t&&"alipayclient"==n.match(/AlipayClient/i))return window.location.replace("https://h5.dabby.com.cn/authhtml/error.html?tip=3&cert_token="+o),e.abrupt("return",!1);e.next=11;break;case 11:return e.next=13,navigator.mediaDevices.enumerateDevices().then(function(e){var t=[];e.forEach(function(e){"videoinput"==e.kind&&(-1!=e.label.indexOf("facing front")?t[0]=e.deviceId:t.push(e.deviceId))}),0<t.length&&(m.constraints.video.deviceId=t[0])});case 13:return m.mediaDevice=!0,e.abrupt("return",!0);case 15:case"end":return e.stop()}},e)}))()},fnInit:function(t){return n()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.drawCircle(),H=m.gradientColor("#BFD9F3","#1989fa",66),m.getRandomRate(),m.modelLoading=!0,e.next=6,G.nets[m.nets].loadFromUri("./models");case 6:return e.next=8,G.loadFaceLandmarkModel("./models");case 8:m.options=new G.TinyFaceDetectorOptions({inputSize:224,scoreThreshold:.3}),m.videoEl=m.$refs.myVideo,m.canvasEl=m.$refs.myCanvas,m.modelLoading=!1,t&&m.fnOpen();case 13:case"end":return e.stop()}},e)}))()},fnRunFaceLandmark:function(){return n()(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.videoEl.paused)return e.abrupt("return",clearTimeout(m.timeout));e.next=2;break;case 2:return e.next=4,G[m.detectFace](m.videoEl,m.options);case 4:(t=e.sent)&&!m.videoEl.paused?(m.faceNum=t?t.length:0,m.faceScore=1===m.faceNum?t[0].score:0):m.canvasEl.getContext("2d").clearRect(0,0,m.canvasEl.width,m.canvasEl.height),m.timeout=setTimeout(function(){return m.fnRunFaceLandmark()},150);case 7:case"end":return e.stop()}},e)}))()},fnRun:function(){setTimeout(function(){m.fnRunFaceLandmark()},300)},fnOpen:function(){"object"!==F()(window.stream)&&(m.cameraLoading=!0,m.tipText="正在启动相机…",clearTimeout(m.timeout),m.timeout=setTimeout(function(){navigator.mediaDevices.getUserMedia(m.constraints).then(m.fnSuccess).catch(m.fnError)},200))},fnSuccess:function(e){window.stream=e,m.videoEl.srcObject=e,m.videoEl.play(),m.overtimer=setInterval(m.overtimeRun,1e3),setTimeout(function(){m.cameraLoading=!1,m.cameraWork=!0,m.tipText="请移动人脸到框内"},100)},fnError:function(e){if(q++,m.cameraLoading=!1,2<q||"NotAllowedError"!=e.name)return Object(s.a)({type:"danger",message:"开启相机失败, 已切换至视频录制模式"}),m.tipText="请确保正对手机，光线充足",m.mediaDevice=!1,m.buttonTimmerRun(),m.resultCode=4,sessionStorage.setItem("CAMERA_ERROR",q),void(l="".concat(e.name,": ").concat(e.message));m.tipText="开启相机失败, 请重试",m.resultCode=2,m.resultShow=!0},fnClose:function(){m.canvasEl&&m.canvasEl.getContext("2d").clearRect(0,0,m.canvasEl.width,m.canvasEl.height),m.videoEl&&m.videoEl.pause(),m.cameraWork=!1,clearTimeout(m.timeout),"object"===F()(window.stream)&&(window.stream.getTracks().forEach(function(e){return e.stop()}),window.stream="",m.videoEl.srcObject=null)},drawCircle:function(){var e=m.$refs.myCircle,e=(m.stepEl=m.$refs.myStep,window.devicePixelRatio&&(m.stepEl.style.width=e.style.width="300px",m.stepEl.style.height=e.style.height="400px",m.stepEl.height=e.height=400*window.devicePixelRatio,m.stepEl.width=e.width=300*window.devicePixelRatio,m.stepEl.getContext("2d").scale(window.devicePixelRatio,window.devicePixelRatio),e.getContext("2d").scale(window.devicePixelRatio,window.devicePixelRatio)),e.getContext("2d"));e.fillStyle="#fff",e.arc(150,150,110,0,2*Math.PI,!1),e.arc(150,150,300,0,2*Math.PI,!0),e.fill(),m.drawStepRound()},drawStepRound:function(){var e=m.stepEl.getContext("2d");e.clearRect(0,0,m.stepEl.width,m.stepEl.height),e.beginPath(),e.lineWidth=4,e.strokeStyle="#ebebeb",e.lineCap="round",e.arc(150,150,114,Math.PI/180*105,Math.PI/180*435,!1),e.stroke()},drawStep:function(e,t){var n=m.stepEl.getContext("2d"),e=Math.PI/180*(e+90+15),t=Math.PI/180*(t+90+15);n.beginPath(),n.lineWidth=5,n.lineCap="round",n.strokeStyle=H[m.stepIndex],n.arc(150,150,114,e,t,!1),n.stroke(),n.closePath(),m.stepIndex+1<m.photos.length/3*66&&requestAnimationFrame(function(){m.stepIndex++,m.currentDeg+=a[m.stepIndex];var e=m.stepIndex===H.length-1;m.drawStep(m.currentDeg-a[m.stepIndex],e?V:m.currentDeg),e&&(m.currentDeg=V)})},takePhoto:function(e){var t=m.$refs.myPhoto,t=(t.getContext("2d").drawImage(m.videoEl,0,0,m.videoEl.videoWidth,m.videoEl.videoHeight),t.toDataURL("image/jpeg"));m.photos.push({score:e,img:t}),m.mediaDevice&&m.drawStep(m.currentDeg)},overtimeRun:function(){if(m.overtime<=0)return clearInterval(m.overtimer),m.overtime=8,m.fnClose(),m.tipText="检测超时",m.resultCode=2,m.dataLoading=!1,m.resultShow=!0,m.photos=[],m.currentDeg=0,void m.drawStepRound();m.overtime--},gradientColor:function(e,t,n){for(var e=m.colorToRgb(e),a=e[0],r=e[1],i=e[2],e=m.colorToRgb(t),o=(e[0]-a)/n,c=(e[1]-r)/n,l=(e[2]-i)/n,s=[],d=0;d<n;d++){var u=m.colorToHex("rgb("+parseInt(o*d+a)+","+parseInt(c*d+r)+","+parseInt(l*d+i)+")");s.push(u)}return s},colorToRgb:function(e){if((e=e.toLowerCase())&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){for(var t="#",n=1;n<4;n+=1)t+=e.slice(n,n+1).concat(e.slice(n,n+1));e=t}for(var a=[],r=1;r<7;r+=2)a.push(parseInt("0x"+e.slice(r,r+2)));return a}return e},colorToHex:function(e){if(/^(rgb|RGB)/.test(e)){for(var t=e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),n="#",a=0;a<t.length;a++){var r=Number(t[a]).toString(16);"0"===(r=r<10?"0"+r:r)&&(r+=r),n+=r}return n=7!==n.length?e:n}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e))return e;var i=e.replace(/#/,"").split("");if(6===i.length)return e;if(3===i.length){for(var o="#",c=0;c<i.length;c+=1)o+=i[c]+i[c];return o}},getRandomRate:function(){a=[];for(var e=0,t=1;t<66;t++){var n=Math.floor(4*Math.random()+2);a.push(n),e+=n}a.push(V-e)},dataRequest:function(i){return n()(c.a.mark(function e(){var n,a,r,t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.fileLoading=!1,!i){e.next=9;break}if(i.file.size<204800)return Object(s.a)({type:"danger",message:"视频录制时间过短"}),e.abrupt("return");e.next=5;break;case 5:if(2e4<(t=Math.round(new Date)-i.file.lastModified)||t<0)return Object(s.a)({type:"danger",message:"请按照页面提示, 现场录制人像视频"}),e.abrupt("return");e.next=9;break;case 9:if(m.dataLoading=!0,m.resultShow=!1,m.tipText="正在认证…",n={type:i?3:2,certToken:o},i)return n.videoBase64="",e.next=17,m.file2Base64(i.file).then(function(e){var t=Math.floor(6001*Math.random()+2e3);n.videoBase64=e.slice(0,t)+o.replace(/-/g,"")+e.slice(t)}).catch(function(e){});e.next=19;break;case 17:if(n.videoBase64){e.next=19;break}return e.abrupt("return");case 19:return i||(a=[],m.photos.map(function(e){var e=e.img.replace("data:image/jpeg;base64,",""),t=Math.floor(6001*Math.random()+2e3);a.push(e.slice(0,t)+o.replace(/-/g,"")+e.slice(t))}),n.images=a),r=sessionStorage.getItem("REGISTER_PARAMS"),t=localStorage.getItem("LOGIN_TOKEN"),r&&t&&((r=JSON.parse(r)).idStartDate&&(r.idStartDate=r.idStartDate.replace(/-/g,"")),r.idEndDate&&(r.idEndDate=r.idEndDate.replace(/-/g,"")),n.userInfo=r,n.loginToken=t),e.next=25,Object($.b)(n,document.referrer,l).then(function(e){if(m.overtimer&&clearInterval(m.overtimer),m.overtime=8,0!==e.retCode){var t=[8005,8006,8007,2008];if(m.resultCode=-1!=t.indexOf(e.retCode)?2:3,m.tipText=e.retMessage,m.dataLoading=!1,m.resultShow=!0,m.mediaDevice&&(m.photos=[],m.currentDeg=0,m.stepIndex=0,m.drawStepRound()),-1===t.indexOf(e.retCode))return Object(s.a)({type:"danger",message:e.retMessage}),void m.foreBack(e);if(2<=J)return m.resultCode=3,Object(s.a)({type:"danger",message:"活检失败,超过重试次数"}),void m.foreBack(e);J++}r&&sessionStorage.removeItem("REGISTER_PARAMS"),0===e.retCode&&(m.resultCode=0,m.tipText="认证成功",m.dataLoading=!1,m.resultShow=!0,sessionStorage.setItem("USER_PHOTOS",JSON.stringify({photos:m.photos}))),-1!=[0,4101,4103,4104,4132,4109,4116,4151,4152,4153,4154].indexOf(e.retCode)&&setTimeout(function(){m.foreBack(e)},1e3)}).catch(function(e){alert(e),m.handelNetworkErr(e)});case 25:case"end":return e.stop()}},e)}))()},foreBack:function(e){var t;e.foreBackUrl&&"https://is_demo"==e.foreBackUrl?m.$router.replace("/result?cert_token=".concat(o)):(t={certToken:o,retCode:e.retCode,retMessage:e.retMessage},-1!=[4030,4022].indexOf(e.retCode)&&e.foreBackUrl||e.foreBackUrl?window.location.replace(encodeURI("".concat(e.foreBackUrl,"?authResult=").concat(JSON.stringify(t)))):m.$router.replace("/nofore?res=".concat(JSON.stringify(t))))},reset:function(){m.tipText="请确保正对手机，光线充足",m.photos=[],m.resultCode=0,m.resultShow=!1,m.currentDeg=0,m.stepIndex=0,m.drawStepRound(),m.mediaDevice&&m.fnInit(!0)},handelNetworkErr:function(e){m.resultCode=2,m.tipText="网络错误",m.dataLoading=!1,m.resultShow=!0,m.photos=[],m.currentDeg=0,m.drawStepRound(),m.overtimer&&clearInterval(m.overtimer),m.overtime=8,i.a.alert({title:"网络错误",message:e}).then(function(){})},file2Base64:function(r){return new Promise(function(t,n){var e=new FileReader,a="";e.readAsDataURL(r),e.onload=function(){a=e.result},e.onerror=function(e){n(e)},e.onloadend=function(){var e=a.split("base64,");t(e[1])}})}}},t=(e("cd9d"),e("6b0d")),e=e.n(t);d.default=e()(B,[["render",function(e,t,d,l,n,a){var r=Object(u.F)("van-image"),i=Object(u.F)("van-checkbox"),o=Object(u.F)("van-button"),c=Object(u.F)("van-uploader"),s=Object(u.F)("van-dialog");return Object(u.z)(),Object(u.h)("div",f,[Object(u.i)("div",g,[Object(u.i)("h2",{innerHTML:n.tipText},null,8,p)]),Object(u.N)(Object(u.i)("i",null,[Object(u.N)(Object(u.i)("div",b,[Object(u.k)(r,{fit:"cover",width:"16rem",height:"16.4rem",src:"./images/video_tip.png"}),h],512),[[u.K,!n.dataLoading&&!n.resultShow]])],512),[[u.K,!n.mediaDevice&&!n.mediaChecking]]),Object(u.N)(Object(u.i)("i",null,[Object(u.N)(Object(u.i)("div",v,[Object(u.k)(r,{round:"",fit:"cover",width:"22rem",height:"22rem",src:"./images/face.png"})],512),[[u.K,!(n.cameraWork||n.cameraLoading||n.dataLoading||n.resultShow)]]),Object(u.N)(Object(u.i)("div",w,[Object(u.k)(r,{round:"",fit:"cover",width:"22rem",height:"22rem",src:"./images/camera_bg.png"}),Object(u.i)("div",O,[Object(u.k)(r,{fit:"contain",width:"11.2rem",height:"9rem",src:"./images/camera.png",class:"camera-image"}),Object(u.k)(r,{fit:"contain",width:"5rem",height:"5rem",src:"./images/aperture.png",class:"camera-aperture"})])],512),[[u.K,n.cameraLoading]]),Object(u.N)(Object(u.i)("div",j,[Object(u.i)("video",{id:"myVideo",ref:"myVideo",muted:"",loop:"",playsinline:"","webkit-playsinline":"","x5-playsinline":"",onLoadedmetadata:t[0]||(t[0]=function(){return a.fnRun&&a.fnRun.apply(a,arguments)})},null,544),Object(u.i)("canvas",k,null,512),Object(u.i)("canvas",x,null,512),Object(u.i)("canvas",C,null,512)],512),[[u.K,n.cameraWork]])],512),[[u.K,n.mediaDevice&&!n.mediaChecking]]),Object(u.N)(Object(u.i)("div",R,[Object(u.i)("div",{class:Object(u.t)("data-loading ".concat(0<n.photos.length?"":"no-photo"))},[Object(u.k)(r,{round:"",fit:"cover",width:"22rem",height:"22rem",src:0<n.photos.length?n.photos[0].img:"./images/camera_bg.png",class:Object(u.t)(0<n.photos.length?"data-image-blur":"")},null,8,["src","class"]),Object(u.k)(r,{fit:"contain",width:"8rem",height:"8rem",src:"./images/face_smill.png",class:"data-image"}),Object(u.k)(r,{fit:"contain",width:"10rem",height:"10rem",src:"./images/loading.png",class:"data-loading-image"})],2)],512),[[u.K,n.dataLoading]]),Object(u.N)(Object(u.i)("div",S,[Object(u.i)("div",y,[Object(u.N)(Object(u.k)(r,{fit:"contain",width:"22rem",height:"22rem",src:"./images/face_success.png"},null,512),[[u.K,0==n.resultCode]]),Object(u.N)(Object(u.k)(r,{fit:"contain",width:"22rem",height:"22rem",src:"./images/face_fail.png"},null,512),[[u.K,1==n.resultCode]]),Object(u.N)(Object(u.k)(r,{fit:"contain",width:"22rem",height:"22rem",src:"./images/face_timeout.png"},null,512),[[u.K,2==n.resultCode||3==n.resultCode]])])],512),[[u.K,n.resultShow]]),Object(u.i)("canvas",I,null,512),Object(u.i)("div",T,[Object(u.N)(Object(u.i)("div",E,[Object(u.N)(Object(u.k)(i,{modelValue:n.agreement,"onUpdate:modelValue":t[2]||(t[2]=function(e){return n.agreement=e}),shape:"square","checked-color":"#2d9bff","icon-size":"14px"},{default:Object(u.M)(function(){return[Object(u.i)("i",{innerHTML:"你同意 <strong>".concat(n.compName,"</strong> 使用人脸识别验证你的身份信息并授权其查询认证结果。")},null,8,L),N,Object(u.i)("span",{onClick:t[1]||(t[1]=function(){return a.agreementClick&&a.agreementClick.apply(a,arguments)})},"《人脸识别认证服务协议》")]}),_:1},8,["modelValue"]),[[u.K,!n.cameraWork&&!n.cameraLoading&&!n.dataLoading&&!n.resultShow&&n.mediaDevice||n.buttonTime<=0&&!n.dataLoading&&0!=n.resultCode&&!n.fileLoading&&!n.mediaDevice]])],512),[[u.K,n.compName]]),Object(u.N)(Object(u.i)("i",null,[Object(u.N)(Object(u.k)(o,{type:"primary",block:"",disabled:""},{default:Object(u.M)(function(){return[Object(u.j)("开始录制 ("+Object(u.I)(n.buttonTime)+")",1)]}),_:1},512),[[u.K,n.buttonTime]]),Object(u.N)(Object(u.i)("i",null,[Object(u.N)(Object(u.k)(o,{type:"primary",block:"",onClick:a.notAgreementClick},{default:Object(u.M)(function(){return[Object(u.j)(Object(u.I)(2==n.resultCode?"重新":"开始")+"录制",1)]}),_:1},8,["onClick"]),[[u.K,!n.agreement]]),Object(u.N)(Object(u.k)(c,{accept:"video/*",capture:"user","before-read":a.beforeRead,"after-read":a.dataRequest},{default:Object(u.M)(function(){return[Object(u.k)(o,{type:"primary",block:""},{default:Object(u.M)(function(){return[Object(u.j)(Object(u.I)(2==n.resultCode?"重新":"开始")+"录制",1)]}),_:1})]}),_:1},8,["before-read","after-read"]),[[u.K,n.agreement]])],512),[[u.K,n.buttonTime<=0&&!n.dataLoading&&0!=n.resultCode&&!n.fileLoading]]),Object(u.N)(Object(u.k)(o,{loading:"",block:"",type:"primary","loading-text":"加载视频中"},null,512),[[u.K,n.fileLoading]])],512),[[u.K,!n.mediaDevice]]),Object(u.N)(Object(u.i)("i",null,[Object(u.N)(Object(u.k)(o,{type:"primary",block:"",loading:n.modelLoading,"loading-text":"加载中...",onClick:a.notAgreementClick},{default:Object(u.M)(function(){return[M]}),_:1},8,["loading","onClick"]),[[u.K,!(n.cameraWork||n.cameraLoading||n.dataLoading||n.resultShow||n.agreement)]]),Object(u.N)(Object(u.k)(o,{type:"primary",block:"",loading:n.modelLoading,"loading-text":"加载中...",onClick:t[3]||(t[3]=function(e){return a.fnInit(!0)})},{default:Object(u.M)(function(){return[D]}),_:1},8,["loading"]),[[u.K,!n.cameraWork&&!n.cameraLoading&&!n.dataLoading&&!n.resultShow&&n.agreement]]),Object(u.N)(Object(u.k)(o,{type:"primary",block:"",onClick:a.reset},{default:Object(u.M)(function(){return[_]}),_:1},8,["onClick"]),[[u.K,2==n.resultCode]])],512),[[u.K,n.mediaDevice]])]),Object(u.k)(s,{show:n.agreementShow,title:" ","show-cancel-button":"","confirm-button-text":"同意",onConfirm:t[4]||(t[4]=function(e){n.agreementShow=!1,n.agreement=!0}),onCancel:t[5]||(t[5]=function(e){n.agreementShow=!1,n.agreement=!1})},{default:Object(u.M)(function(){return[Object(u.i)("div",U,[n.agreementURL?(Object(u.z)(),Object(u.h)("iframe",{key:0,src:n.agreementURL,frameborder:"0",height:"300",width:"100%"},null,8,P)):Object(u.g)("",!0)])]}),_:1},8,["show"])])}],["__scopeId","data-v-f856a242"]])},cd9d:function(e,t,n){"use strict";n("4685")}}]);